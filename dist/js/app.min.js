!function(){"use strict";angular.module("myApp",["ui.router","ngSanitize","ui.bootstrap","angularGrid","ngAnimate","ngMaterial","LocalForageModule","toastr","angucomplete-alt","ngResize"]).constant("API_URL","http://chuckformetricon.australiasoutheast.cloudapp.azure.com:81").config(["$qProvider","$stateProvider","$httpProvider","$urlRouterProvider","API_URL","$localForageProvider","$urlMatcherFactoryProvider","toastrConfig",function(e,t,r,n,o,i,l,a){angular.extend(a,{autoDismiss:!0,tapToDismiss:!0});var c=[localforage.INDEXEDDB,localforage.WEBSQL,localforage.LOCALSTORAGE];i.config({driver:c,name:"propertyLocal",storeName:"allData"}),l.strictMode(!1),t.state("main",{url:"/main",templateUrl:"views/main.html"}).state("main.welcome",{url:"/welcome",templateUrl:"views/welcome.html",controller:"dashboardCtrl"}).state("main.home",{url:"/home",templateUrl:"views/home.html",controller:"homeCtrl"}).state("main.selection",{url:"/homeselection",templateUrl:"views/selection.html",controller:"selectionCtrl"}).state("main.interior",{url:"/interior",templateUrl:"views/interior.html",controller:"interiorCtrl"}).state("main.interiormodel",{url:"/interior/model",templateUrl:"views/interior.model.html",controller:"modelCtrl"}).state("main.kitchen",{url:"/kitchen",templateUrl:"views/kitchen.html",controller:"interiorCtrl"}).state("main.client",{url:"/client",templateUrl:"views/client.html",controller:"clientCtrl"}).state("main.model",{url:"/model",templateUrl:"views/model.html",controller:"modelCtrl"}).state("main.scheme",{url:"/spaces",templateUrl:"views/scheme.html",controller:"schemeCtrl"}).state("main.exp",{url:"/exp",templateUrl:"views/experiment.html"}).state("main.exterior",{url:"/exterior",templateUrl:"views/exterior.html",controller:"exteriorCtrl"}),n.otherwise("/main/welcome")}]).run(function(e,t,r,n,o,i,l){e.$on("$stateChangeSuccess",function(r,n,o,a,c){i.getItem("property").then(function(r){"main.welcome"==a.name||"main.home"==a.name?r?i.getItem("property_data").then(function(e){"main.home"!==n.name&&(e||l.go("main.welcome"))}):l.go("main.welcome"):""==a.name&&i.getItem("property_data").then(function(e){e||l.go("main.welcome")}),e.goBack=function(){t.history.back()}})})}).directive("errSrc",function(){return{link:function(e,t,r){e.$watch(function(){return r.ngSrc},function(e){e||t.attr("src",r.errSrc)}),t.bind("error",function(){t.attr("src",r.errSrc)})}}}).directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}).directive("numbersOnly",function(){return{require:"ngModel",link:function(e,t,r,n){function o(e){if(e){var t=e.replace(/[^0-9-]/g,"");return t!==e&&(n.$setViewValue(t),n.$render()),t}}n.$parsers.push(o)}}}).directive("resizeTest",["resize",function(e){return{restrict:"A",controller:function(e){e.$on("resize",function(t,r){e.size=r})},link:function(e,t,r){}}}])}();
!function(){"use strict";function e(e,t,a,i,c,o,r){e.themes=[],e.themedetail={},e.selecteds=0,gtag("config","UA-112833309-1",{page_title:"exteriorpage",page_path:o.current.url}),r.getItem("property_data").then(function(e){console.log("data:",e)}),t.get("http://chuckformetricon.australiasoutheast.cloudapp.azure.com/consolidated").then(function(e){}),r.getItem("property_data").then(function(t){var a=_.filter(t.packages,{package_type:"Exterior"});_.each(a,function(t){t.image="./img/error.jpg",e.themes.push(t)}),c(function(){e.getTheme(e.themes[0],0)},300)}),e.getTheme=function(t,a){console.log("data:",t),_.each(e.themes,function(e){e.package_id==t.package_id?e.selected=!0:e.selected=!1});var i=_.find(e.themes,{selected:!0});e.themedetail=i;var c=_.orderBy(t.package_items,function(e){return e.surface.surface_name},["asc"]);e.themedetail.package_items=c,e.selecteds=a,gtag("event","select",{event_category:"Exterior",event_label:t.package_name}),console.log("$scope.themedetail:",e.themedetail)},e.goNext=function(t){r.getItem("property_data").then(function(a){a&&(a.model_selected=[],a.items=[],a.selectedpackage=[],a.selectedpackage.push(e.themedetail),_.each(e.themedetail.package_items,function(e){a.items.push({item_id:e.item_id,space_id:e.space_id,surface_id:e.surface_id,product_id:e.product_id,level:1,price:e.product.sell_price,is_addon:!1,quantity:1,is_upgrade:!1,quantity_unit:"1",product:e.product,space:e.space,surface:e.surface})}),a.package_id=e.themedetail.package_id,0==a.model_selected.length&&a.model_selected.push({type:"exterior",image:e.themedetail.image,title_name:e.themedetail.package_name}),e.items=a,"zoom"==t?(console.log("item:",a),gtag("event","view",{event_category:"Exterior",event_label:e.themedetail.package_name,value:e.themedetail.image}),r.setItem("property_data",e.items),o.go("main.model",null,{reload:!0})):(r.setItem("property_data",e.items),o.go("main.interior",null,{reload:!0})))})}}angular.module("myApp").controller("exteriorCtrl",e),e.$inject=["$scope","$http","API_URL","$stateParams","$timeout","$state","$localForage"]}();
!function(){"use strict";function e(e,t,a,o,n,i,s){console.log("dashboardCtrl:"),gtag("config","UA-113798651-1",{page_title:"welcomepage",page_path:a.current.url}),i.removeItem("property_data"),i.removeItem("property"),async.waterfall([function(e){t.showLoader=!0,o.post(n+"/login",{email_address:"test@gmail.com"}).then(function(t){t.data.status&&"accepted"==t.data.message&&(o.defaults.headers.common.Authorization=t.data.token,i.setItem("token",t.data.token),e())})},function(a){o.get(n+"/consolidated").then(function(a){e.data=a,200==a.status&&"OK"==a.statusText&&(_.each(a.data.interior_schemes,function(e){e.image=n+"/"+e.media_file.media_url}),_.each(a.data.exterior_schemes,function(e){e.image=n+"/"+e.media_file.media_url}),i.setItem("property",a.data),s(function(){t.showLoader=!1},500))})}]),e.click=function(){e.slide="slideInUp",a.go("main.home")},t.$on("$stateChangeStart",function(){e.slide="slideInUp"})}angular.module("myApp").controller("dashboardCtrl",e),e.$inject=["$scope","$rootScope","$state","$http","API_URL","$localForage","$timeout"]}();
!function(){"use strict";function e(e,a,t,i,r,s,d,n,c){gtag("config","UA-113798651-1",{page_title:"clientpage",page_path:s.current.url}),e.details={},e.thankyou=!1,e.able=!0,d.getItem("property").then(function(e){}),e.$on("$stateChangeSuccess",function(a,t,i,r,s){"main.client"==t.name&&d.getItem("property_data").then(function(a){var t=_.find(a.facade_designs,{selected:!0}),i=_.find(a.selectedpackage,{package_type:"Exterior"}),r=_.find(a.selectedpackage,{package_type:"Interior"}),s={facade_id:t.space_id,fp_design_id:a.fp_design_id,home_design_id:a.home_design_id,items:a.items,package_id:a.package_id,price:a.price,scheme_id:a.scheme_id,exterior_scheme_id:i.package_id,interior_scheme_id:r.package_id};s.items=[],_.each(a.items,function(e){var a={space_id:e.space_id,surface_id:e.surface_id,product_id:e.product_id,level:1,price:e.product.sell_price,is_addon:!1,quantity:1,is_upgrade:!1,quantity_unit:"1",product:e.product,material_name:e.product.material_name||"default",surface_name:e.product.surface_name||"default",space:e.space,surface:e.surface};s.items.push(a)}),e.prop_data=s,a.items&&0!=a.items.length||n.history.back()})}),e.tagg=[],e.test=function(a){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;1==a.length?t.test(a[0])||(c.error("Is not a valid email","Error"),e.tagg=[]):a.length>5?(c.error("You reached the maximum amount of emails","Error"),e.tagg.splice(-1,1)):t.test(a[a.length-1])||(c.error("Is not a valid email","Error"),e.tagg.splice(-1,1))},e.send=function(){if(e.able=!1,e.details.secondary_email_addresses=[],e.tagg.length>1){var i=angular.copy(e.tagg),r=i.shift();e.details.secondary_email_addresses=i,e.details.primary_email_address=r}else e.details.primary_email_address=e.tagg[0];e.prop_data.client=e.details,e.prop_data.level=1,gtag("event","send",{event_category:"Email",value:"too many to display"}),a.post(t+"/homeconfig2",e.prop_data).then(function(a){a.status&&(e.thankyou=!0)})}}angular.module("myApp").controller("clientCtrl",e),e.$inject=["$scope","$http","API_URL","$stateParams","$timeout","$state","$localForage","$window","toastr"]}();
!function(){"use strict";function e(e,a,t,n,o,i,s,g,c,d){console.log("homeCtrl"),gtag("config","UA-113798651-1",{page_title:"homedesignpage",page_path:t.current.url}),e.homesdesign=[],e.home=!1,e.facades=[],e.facade=!1,e.floorplans=[],e.floorplan=!1,e.title="",e.homeText="",e.data={},e.floordetail={},e.sizeheight=d.outerHeight,e.datas=[],e.half=!0,e.angularGridoptions={cssGrid:!0,refreshOnImgLoad:!1,gutterSize:10},e.images=[{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"},{image:"img/bg2.jpg"}],g.getItem("property").then(function(a,t){a?(e.datas=a.home_designs,_.each(e.datas,function(e){e.image="img/bg2.jpg",_.each(e.facade_designs,function(e){e.image="http://chuckformetricon.australiasoutheast.cloudapp.azure.com/public/uploads/facade_types/callulatraditional.jpg"})}),e.design=e.datas,e.homecopy=angular.copy(e.design),e.floorplans=a.floorplans):o.get("http://chuckformetricon.australiasoutheast.cloudapp.azure.com:81/consolidated").then(function(t){200==t.status&&"OK"==t.statusText&&(e.datas=t.home_designs,_.each(e.datas,function(e){e.image="img/bg2.jpg",_.each(e.facade_designs,function(e){e.image="http://chuckformetricon.australiasoutheast.cloudapp.azure.com/public/uploads/facade_types/callulatraditional.jpg"})}),e.design=e.datas,e.homecopy=angular.copy(e.design),e.floorplans=a.floorplans,g.setItem("property",t.data))})}),e.$watch("activeState",function(a,t){a!==t&&e.close()}),e.getDetail=function(a,t){t.stopPropagation(),e.selected=null,e.activeState=a,"home"==a?s(function(){e.title="Home Designs",e.home=!0,e.design=e.homecopy,e.floorplan=!1,e.half=!1,s(function(){n.home.refresh()},500)},300):"facade"==a?e.data.home_design_name?s(function(){e.title="Facade Types",e.home=!0;var a=_.find(e.homecopy,{selected:!0});e.design=a.facade_designs,e.half=!1,s(function(){n.home.refresh()},500)},300):(c.clear(),s(function(){c.warning("Please choose  home design first","Warning")},300)):"floorplan"==a&&(e.data.space_name?s(function(){e.title="Floorplan",e.detail=!0,e.floorplan=!0,e.facade=!1,e.home=!1,e.half=!1},300):e.data.space_name||e.data.home_name?(c.clear(),s(function(){c.warning("Please choose facade type first","Warning")},300)):(c.clear(),s(function(){c.warning("Please choose  home design & facade type first","Warning")},300)))},e.getText=function(a){e.homeText=a},e.clearText=function(){e.homeText=""},e.getHomeDesign=function(a,t){console.log("data:",a),a.home_design_id?(console.log("$scope.design:",e.design),_.each(e.design,function(e){e.home_design_id==a.home_design_id?e.selected=!0:e.selected=!1}),gtag("event","select",{event_category:"Home Designs",event_label:a.home_design_name}),e.data.home_design_id=a.home_design_id,e.data.home_design_name=a.home_design_name):a.space_id&&(_.each(e.design,function(e){e.space_id==a.space_id?e.selected=!0:e.selected=!1}),e.data.price=a.price,e.data.facade_id=a.space_id,e.data.space_name=a.space_name,gtag("event","select",{event_category:"Facade Type",event_label:a.space_name})),e.close()},e.getFloorplan=function(a,t){e.selected=t,_.each(e.floorplans,function(e){e.fp_design_id==a.fp_design_id?e.selected=!0:e.selected=!1}),e.data.fp_design_id=a.fp_design_id,e.data.floor_name=a.fp_design_name,gtag("event","select",{event_category:"Floor plan",event_label:a.fp_design_name}),e.close()},e.close=function(){e.selected=null,e.home=!1,e.facade=!1,e.floorplan=!1,e.half=!0},e.viewDetails=function(a){a&&(e.floordetail=a.dimensions),e.detail=!e.detail},e.start=function(){var n=_.find(e.homecopy,{selected:!0});n.floor_name=e.data.floor_name,n.fp_design_id=e.data.fp_design_id,n.price=parseFloat(e.data.price),g.setItem("property_data",n),a.showLoader=!0,t.go("main.selection")},e.findDimension=function(a){return _.findIndex(e.floordetail,function(e){return e.dimension_name==a})}}angular.module("myApp").controller("homeCtrl",e),e.$inject=["$scope","$rootScope","$state","angularGridInstance","$http","API_URL","$timeout","$localForage","toastr","$window"]}();
!function(){"use strict";function e(e,t,a,i,n,c,o,r){gtag("config","UA-113798651-1",{page_title:"interiorpage",page_path:a.current.url}),e.themes=[],o.getItem("property_data").then(function(t){var a=_.filter(t.packages,{package_type:"Interior"});_.each(a,function(t){t.image="./img/buckwheat.jpg",e.themes.push(t)}),r(function(){e.getTheme(e.themes[0],0)},300)}),e.modal=function(){var t=n.open({animation:!0,scope:e,templateUrl:"./views/interior.modal.html",size:"sm"});t.result.then(function(e){a.reload()},function(){}),e.cancel=function(){t.dismiss("cancel")}},e.getTheme=function(t,a){e.selected=a,_.each(e.themes,function(e){e.package_id==t.package_id?e.selected=!0:e.selected=!1});var i=_.find(e.themes,{selected:!0});e.themedetail=i;var n=_.orderBy(t.package_items,function(e){return e.surface.surface_name},["asc"]);e.themedetail.package_items=n,gtag("event","select",{event_category:"Interior",event_label:t.package_name})},e.goNext=function(t){o.getItem("property_data").then(function(i){if(i){i.selectedpackage.push(e.themedetail),_.each(e.themedetail.package_items,function(e){var t={item_id:e.item_id,space_id:e.space_id,surface_id:e.surface_id,product_id:e.product_id,level:1,price:e.product.sell_price,is_addon:!1,quantity:1,is_upgrade:!1,quantity_unit:"1",product:e.product,space:e.space,surface:e.surface};i.items.push(t)}),i.scheme_id=e.themedetail.package_id,i.model_selected.push({type:"interior",image:e.themedetail.image,title_name:e.themedetail.package_name}),_.uniq(i.selectedpackage),_.uniq(i.model_selected),e.items=i;var n=_.uniqBy(e.items.items,function(e){return e.item_id});e.items.items=n}"zoom"==t?(gtag("event","view",{event_category:"Interior",event_label:e.themedetail.package_name,value:e.themedetail.image}),o.setItem("property_data",e.items),r(function(){a.go("main.interiormodel",null,{reload:!0})},200)):(o.setItem("property_data",e.items),r(function(){a.go("main.client",null,{reload:!0})},200))})},e.goToClient=function(){e.prop_data.request_info.spaces[1].theme_id=e.themedetail.theme_id,e.prop_data.request_info.spaces[1].space_selected=e.themedetail,o.setItem("property_data",e.prop_data),a.go("main.client")}}angular.module("myApp").controller("interiorCtrl",e),e.$inject=["$scope","$rootScope","$state","angularGridInstance","$uibModal","API_URL","$localForage","$timeout"]}();
!function(){"use strict";function e(e,o,n,s,t){console.log("schemeCtrl"),gtag("config","UA-113798651-1",{page_title:"spacespage",page_path:s.current.url}),e.spaces=[],e.floorDimensions=[],e.getspaceId,e.roomDimensions=[],t.getItem("property_data").then(function(o){e.selectedHome=o.home_design_name+" "+o.floor_name}),t.getItem("property").then(function(o){if(e.floorplans=o.floorplans[0],e.roomDimensions=o.floorplans[0].floorplan_spaces,e.beds=_.filter(e.roomDimensions,{space_type:"Bedroom"}),e.shower=_.filter(e.roomDimensions,{space_type:"Bathroom"}),e.garage=_.filter(e.roomDimensions,{space_type:"Garage"}),e.doublegarage=_.filter(e.roomDimensions,{space_type:""}),o){e.floorDimensions=o.floorplans[0].home_dimensions;var n=_.filter(e.floorDimensions,{is_summed_for_total:!0});e.totalSq=_.sumBy(n,function(e){return e.dimension})}}),e.getSpaces=function(o){e.getspaceId=o.space_id},e.next=function(){s.go("main.exterior",{space_id:e.getspaceId},{reload:!1})},e.findDimension=function(o){return _.findIndex(e.floorDimensions,function(e){return e.dimension_name==o})}}angular.module("myApp").controller("schemeCtrl",e),e.$inject=["$scope","$http","API_URL","$state","$localForage"]}();
!function(){"use strict";function e(e,o,t,l,r,n,c){c.getItem("property_data").then(function(o){console.log("data:",o);var t=_.find(o.model_selected,{type:"exterior"}),l=_.find(o.model_selected,{type:"interior"});console.log("exterior",t),console.log("interior",l),e.model=t,e.model1=l,console.log("$scope.model:",e.model),console.log("$scope.model1:",e.model1),e.classes="background: url("+e.model.image+") no-repeat center center fixed",e.classes1="background: url("+e.model1.image+") no-repeat center center fixed"})}angular.module("myApp").controller("modelCtrl",e),e.$inject=["$scope","$http","API_URL","$stateParams","$timeout","$state","$localForage"]}();
!function(){"use strict";function e(e,t,o,n,l,c,a){console.log("selectionCtrl"),gtag("config","UA-113798651-1",{page_title:"homeselectedpage",page_path:n.current.url}),c(function(){a.showLoader=!1},1e3),l.getItem("property_data").then(function(t){console.log("data;",t),t&&(e.titleHome=t.home_design_name)})}angular.module("myApp").controller("selectionCtrl",e),e.$inject=["$scope","$http","API_URL","$state","$localForage","$timeout","$rootScope"]}();